% sample file for Modelica Conference paper

\documentclass[11pt,a4paper,twocolumn]{article}
\usepackage{graphicx}
\graphicspath{{fig/}}
\usepackage[T1]{fontenc}
\usepackage[british]{babel}      % some british specific settings
\usepackage[utf8]{inputenc}    %% european characters can be used
\usepackage{lmodern,amsmath,mathptmx,url}      %% recommended for readable pdf
\pagestyle{empty}                %% no page numbers!
\usepackage{geometry}            %% please don't change geometry settings!
\geometry{left=20mm, right=20mm, top=25.4mm, bottom=25mm, noheadfoot, columnsep=8mm}
\parindent0pt
\bibliographystyle{ieeetr}

% some additional packages
\usepackage{listings} % for code listings
\usepackage{color}
\usepackage[hidelinks=true]{hyperref}

% usefull commands
\newcommand{\myr}{\textsuperscript{\textregistered}}
\newcommand{\ud}{\mathrm{d}}
\newcommand{\matx}[1]{\mathbf{#1}}
\newcommand{\impact}{\texttt{impact}} % impact is going to get used quite a lot :)
\newcommand{\code}[1]{\texttt{#1}} % make quoting code text a bit simpler

\begin{document}

\title{\textbf{{\small Modelica'2014}\\
    \impact -- A Modelica\myr\ Package Manager}}

\author{Michael Tiller\\\href{http://xogeny.com}{Xogeny Inc.}, USA\\\href{mailto:michael.tiller@xogeny.com}{\nolinkurl{michael.tiller@xogeny.com}} %
        \and Dietmar Winkler\\\href{http://www.hit.no}{Telemark University College}, Norway\\\href{mailto:dietmar.winkler@hit.no}{\nolinkurl{dietmar.winkler@hit.no}}}
\date{} % <--- leave date empty
\maketitle\thispagestyle{empty} %% <-- you need this for the first page

\section*{Abstract}

To manage complexity, modern programming languages use organizational
units to group code related by some common purpose.  Depending on the
programming language, these units might be called libraries, packages
or modules.  But they all attempt to encapsulate functionality to
promote modular code and reusability.  For the remainder of this
paper, we will simply refer to these organizational units as
\emph{packages} (as they are called in Modelica).

Also common to many modern programming languages are tools that can be
used to manage these packages.  These tools are generally called
\emph{package managers} and they allow developers to quickly "fetch" any
packages they may need for a given project.  The main functions of
package managers are to allow developers to search, install, update
and uninstall packages with a simple command-line or graphical
interface.  In the Java world, the most common package manager is
\code{maven}.  For Python, tools like \code{easy\_install} and \code{pip} are
used for managing packages.  For client-side web development,
\code{bower} is used.  For server-side JavaScript, the tool of choice is
\code{npm}.  For compiled languages, these package managers often
include some additional build functionality as well.

This paper introduces \emph{\impact}, a package manager for Modelica.
Using \impact, Modelica users and developers can quickly search
for, install and update Modelica libraries.  In this paper, we will
discuss the functionality provided by \impact.  In addition, we
will discuss how the functionality was implemented.  As part of this
we will discuss the importance of collaborative platforms, like
\href{https://github.com}{GitHub} in our case, for providing a means for collecting,
curating and distributing packages within a community of developers.

The \impact\ package manager is provided to the Modelica community as
a free, open-source tool.  Furthermore, the protocols involved are all
documented and we encourage tool vendors to integrate them into their
own tools so that graphical tools can provide the same searching,
updating and installation capabilities that the command-line tool
provides.

\paragraph{Keywords:}
\emph{modelica, package manager, github, dependency management}

\section{Introduction}
\label{sec:intro}

It is increasingly the case that the adoption of new technologies hinges more
and more on automating away the tedious tasks required to learn and adopt the
technologies.  For programming languages or frameworks, this means streamlining
the process by which libraries can be found and installed.

For nearly all modern languages, this issue of "package management" has reached
the point where it is almost an element of language design.  The Java world has 
the \code{maven} tool, Scala has \code{sbt}, Node.js has \code{npm} and the Go 
language includes built-in support for package management via its the command line 
\code{go} compiler.

In the Modelica world, this issue has been largely overlooked.  Although there
have been proposals for formats to list network accessible libraries, these 
efforts have remained mere proposals without any concrete functionality.  The
\impact\ project was inspired by the \code{Bower}\cite{Bower} project's approach.  
This lightweight, \code{git}-centric approach (discussed in Section
\ref{sec:candidates} turned out to be relatively straightforward to implement and 
provides functionality otherwise unavailable in the Modelica world.

The goal of this project is to provide the same basic package management features 
found across most of the examples listed so far.  These features will be discussed 
in detail in subsequent sections of this paper (see Section \ref{sec:command_line}.
Our goal is to lower the barrier for users to find, install and update libraries.  
At the same time, we expect that the \impact\ tool itself will be just as easy to 
install as the libraries it supports.

The problem that \impact\ addresses is making installation of Modelica packages as 
easy as possible.  There are actually three important aspects to the problem.  The 
most obvious aspect is providing a command-line interface that can be used by 
users to easily install not just a given Modelica library, but \textbf{also its 
dependencies}.  However, such a command line tool must rely on the second aspect 
which is the avialability of a centrally served, up to date index of packages.  
The final aspect is making it easy for library developers \textbf{to publish} 
their libraries in such a way that they are available to other Modelica users 
through the \impact\ package manager.  Each of these aspects will be discussed as 
part of this paper.

It is worth noting that while \impact\ can handle dependences, it doesn't solve 
some of the problems currently inherent in Modelica.  At the moment, dependencies 
between packages are described by individual versions.  The result is that these 
dependencies can create brittle chains which are not always possible to satisfy.  
The logic for unconvering dependencies in \impact\ is very simple.  It merely 
identifies any dependencies explicitly listed by the library and then attempts
to find that version of those packages within the \impact\ package index.
Hopefully the Modelica annotations to express dependencies will be refined to
support a richer set of relationships.  If so, the logic used by \impact\ to
identify and install these dependencies can be extended to support this
improved expressiveness.

\section{Command Line Interface}
\label{sec:command_line}

% DIETMAR

% Talk about installation (we need to get this up on PyPI, right?!)

% Talk about the various commands available with impact (search, list,
% install, etc).  Don't talk about generating indices...we'll talk about
% that later.

\subsection{Searching} % Make each command a subsection
\label{cmd:search}

Search for librararies is done by executed by doing:
\lstset{language=bash}
\begin{lstlisting}[frame=shadowbox]  % Start your code-block

impact.py search <search term>
\end{lstlisting}

\section{Candidate Packages}
\label{sec:candidates}

% DIETMAR

% Discuss how we construct the pool of packages to consider for impact.

% Discuss semantic versioning, tags, github

% Discuss the Github API, how we walk it, what we produce from it and
% where we store the results

\section{Package Index}
\label{sec:index}

% MIKE

% Discuss the file format for the packages that are found.  I suspect
% once we start writing about this, we will feel the urge to clean up
% the format a bit out of sheer embarassment.

% Where the data is published (URL)

\section{Private Packages}
\label{sec:private}

\subsection{Using Private Indices}
\label{sec:use_private}

As mentioned in Section \ref{sec:index}, there will be a package index hosted
on \code{modelica.org} that lists any packages connected to special Modelica
related GitHub accounts.  This provides a means for library developers to
quickly add their libraries to the set of libraries that are publicly indexed.

However, we recognize that many users will depend on libraries that cannot
be hosted publicly.  At the same time, we would like for those users to be
able to benefit from the same kind of package management features for
finding and installing their privately hosted libraries.

For this reason, users can create a special configuration file that
lists the indices to be searched.  By default, \impact\ will use only
the index hosted on \code{modelica.org}.  But through custom
configurations, users can specify any collection of indices (public
or private) they wish to use.

To specify an alternative list of indices, a user simply edit their
user configuration file and add the following text:

\begin{verbatim}
[Impact]
indices=<ur1l>,<url2>
\end{verbatim}
where the value of \code{indices} is a list of URLs pointing to index files.  The default value for the \code{indices} variable is \code{}.

% Kind of lame, but I don't feel like putting the complete logic for this in
% the paper.  It might be nice to include a command-line option that just
% tells the user where it would search for their configuration file?
% (added as issue #34)

Note, the location of the user's configuration file will depend on the platform
their are using.

\subsection{Generating Private Indices}
\label{sec:gen_private}

% MIKE

In order for users to include a private index file in the list of indices to be 
searched (as discussed \ref{sec:use_private}), it is necessary to also have the
capability to easily generate such private indices.

This functionality is also available using the \impact\ command line although
we didn't talk about it previously because it is not functionality that a
typical user would require.

% generating private indices

% Discussion on how users can generate their own package indices
% using impact

\section{Source Code and Licensing}
\label{sec:source}

The \impact\ project started off a simple script, then a gist and eventually a 
complete repository.  The repository for the source code is hosted on GitHub at
\code{https://github.com/xogeny/impact}.  Potential contributors are invited to 
fork the repository and add more functionality.

The software is distributed under an MIT license.  As such, there are no 
significant restrictions on using the code in open-source, closed-source or 
commerical projects.
In fact, we welcome vendor support and adoption.  In addition to making the 
complete source code for the package manager available and documentating the 
functionality in this (freely downloadable) paper, we are also making the index 
data freely available from the modelica.org domain.   We hope that all these 
measures will lead to the highest possible chance of adoption.

\section{Conclusion}
\label{sec:conclusion}

% MIKE

% Relatively light implementation modeled on the Bower approach

% Leverages Git (and/or potentially other version control systems, if
% people want to add support) to build package index

% Relies on semantic versioning

% Handles dependencies

\bibliography{impact}
\end{document}
